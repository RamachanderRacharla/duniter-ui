{"version":3,"sources":["AboutController.js","IndexController.js","IdentityController.js","ParametersController.js","RootBlockController.js","SyncController.js","MainController.js","GraphsBlockchainController.js","GraphsController.js","HomeController.js","HomeNetworkController.js","OverviewController.js","SettingsController.js","BackupController.js","CPUController.js","CurrencyController.js","DataController.js","KeyController.js","LogsController.js","LogsSettingsController.js","NetworkController.js","app.config.js","application.js","conf.js","app/js/lib/conf/i18n/en.json","routes.js","translate.js","peer.js","mobileDetector.js","base58.js","datetime.js","graphs.js","importer.js","pubkeyGenerator.js","ui_utils.js","webmin.js"],"names":["co","require","module","exports","$scope","version","UIUtils","translate","$parent","title","$http","$state","Webmin","summary","changeTitle","message","connected","current","go","console","error","err","conf","PubkeyGenerator","setTimeout","$","material_select","accept","modal","css","openModal","dev_autoconf","idty_uid","Math","random","idty_entropy","idty_password","enableInputs","generated","started","start","hosts","remote_ipv4","push","rport","join","remote_ipv6","host_listening","server","sendConf","try","stop","previewNext","block","raw","blockchain","block_add","res","number","startServices","services","startAll","cancelAndReset","stopAll","resetData","$timeout","$stateParams","$translate","syncWS","ws","sync_mode","simplified_host","synchronizing","sync_failed","host","localStorage","getItem","port","parseInt","to","wrong_host","remote_current","checkNode","checked_host","sync_error","sync_message","split","checking","testSync","targetHost","toast","startSync","down_percent","apply_percent","sp","translatedErr","on","undefined","data","type","value","errorMessage","msg","republishNewSelfPeer","then","log","changed","$apply","autoConfNetwork","setItem","chunkLen","max","min","sync","nodeOK","$interval","Base58","local_host","local_port","local_sign_pk","decode","pubkey","local_sign_sk","seckey","DEFAULT_CESIUM_SETTINGS","notifications","help","Waves","displayEffect","isMobile","sideNav","menuWidth","openWallet","walletHeight","walletWidth","openNewTab","window","location","origin","position","height","width","show","win","settingsStr","dataStr","settings","JSON","parse","keyPairOK","keypair","signPk","signSk","length","encode","Array","from","node","debug","plugins","rememberMe","stringify","close","innerHeight","innerWidth","mainWindow","focus","aboutWin","showAbout","openWindow","subwin","gui","startServer","server_stopped","server_started","stopServer","restartServer","checkUpdates","LATEST_RELEASE_URL","get","latest","local_string_version","m","match","localVersion","localSuffix","isLocalAPreRelease","remoteVersion","tag_name","substr","filter","entry","icon","onclick","openExternal","BLOCKS_COUNT","Graph","loading","blocksCount","$watch","newValue","timeGraph","speedGraph","diffGraph","updateGraphs","currency","parameters","blocks","count","speeds","accelerations","medianTimeIncrements","actualDurations","BY_HOUR","i","len","acc","previousPos","dtDiffEval","j","medianTime","availPreviousBlocks","localAvgSpeed","realDuration","isNaN","avgGenTime","parseFloat","toFixed","time","minSpeeds","map","ceil","sqrt","maxSpeeds","floor","minDurations","maxDurations","difficulties","b","powMin","graphs","withTime","withSpeed","withDifficulty","timeGraphs","series","difficultyGraph","enableTabs","menu","peers","update","searching","delayP","Q","delay","network","moment","bindBlockWS","loadPowData","M","monetaryMass","UD","ud0","lastUDBlock","N","membersCount","dividend","pow","unitbase","c","current_currency","current_number","current_membersCount","current_medianTime","current_powMin","phones","abc","newIdentities","dropdown","constrainwidth","lastNearPoW","totalPoW","sync_state","network_percent","peer_percent","has_pulled","is_pulling","last_pulling","start_block","sync_time","fromNow","powSummary","pow_total","total","pow_mirror","mirror","pow_waiting","waiting","event","last","doneCount","found","hash","cb","wsBlock","round","reconfigure_network","reconfiguring","interfaces","netinferfaces","local_ipv4","auto","local","ipv4","local_ipv6","ipv6","remote","lport","upnp","dns","netConf","should_reconfigure","isNodePubliclyReachable","reachable","success","$location","fullReset","Importer","export_link","getExportURL","cpuPower","cpu","updateCPUpower","savingCPU","cpuConf","attr","Peer","peer","p","name","getURL","slice","host_port","getHost","getPort","resetNode","resetNodeAndSync","remote_host","keyConf","reload","_","logsSize","logs","range","logsString","follow","levels","warn","info","trace","keys","level","splice","send","addLogs","autoDigest","pause","newlogs","elem","document","getElementById","scrollTop","scrollHeight","whenOpened","generating","shareLogs","logsExport","link","netinterfaces","firstConf","autoconf","autoconfig","local_neti","toArrayOfAddresses","remote_neti","default_port","saveConf","netiScope","reduce","arr","neti","concat","addresses","addr","address","family","angular","duniterApp","config","$compileProvider","aHrefSanitizationWhitelist","duniterChildCallback","onresize","onResize","url","options","callback","Window","open","screenTop","top","screenLeft","left","Shell","homeControllers","controller","init","jade","e","api_timeout","app","$stateProvider","$urlRouterProvider","state","template","resolve","abstract","dt","stepMax","sigDelay","sigPeriod","sigStock","sigWindow","sigValidity","msValidity","sigQty","xpercent","percentRot","blocksRot","medianTimeBlocks","resolveNetworkAutoConf","selfPeer","self","status","errorMsg","otherwise","run","$rootScope","$on","toState","toParams","fromState","fromParams","$translateProvider","translations","preferredLanguage","useSanitizeValueStrategy","json","that","BMA_REGEXP","Object","forEach","key","endpoints","statusTS","keyID","substring","copyValues","obj","copyValuesFrom","getRaw","getBMA","bma","ep","matches","getDns","getIPv4","getIPv6","hasValid4","base","getNamedURL","isReachable","mobilecheck","check","a","test","navigator","userAgent","vendor","opera","alphabet","alphabetMap","charAt","buffer","digits","carry","unshift","digit","string","Uint8Array","input","bytes","factory","format","speedGraphs","id","offset","getSeries","xValuex","highcharts","chart","zoomType","events","load","text","subtitle","ontouchstart","xAxis","minRange","labels","formatter","yAxis","minorTickInterval","colors","legend","enabled","tooltip","shared","crosshairs","blockFormatter","plotOptions","area","fillColor","linearGradient","x1","y1","x2","y2","stops","Highcharts","getOptions","Color","setOpacity","marker","radius","lineWidth","states","hover","threshold","timeAccelerations","timesInc","inc","html","x","points","point","color","y","Upload","uploadFiles","file","errFiles","f","errFile","upload","getImportURL","importData","response","result","evt","progress","loaded","pubkey_preview","timeout","preview","salt","pass","newConcat","previewPubkey","catch","$q","when","toastRaw","Materialize","translated","addClass","jTabs","tabs","click","href","currentTarget","currentID","path","replace","httpProtocol","protocol","wsProtocol","getResource","uri","params","httpGet","Promise","reject","suffix","pkeys","queryParams","pkey","prevURI","RegExp","headers","postResource","post","wsMap","sock","WebSocket","onclose","onerror","opened","openedCallback","onopen","listener","messageType","onmessage","wsPeer","nbLines","opts","http","openUPnP","regularUPnP","hostname","service","instance"],"mappings":"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CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3MA;AAAA;;;;;;ACAA,IAAIna,KAAKC,QAAQ,IAAR,CAAT;AACA,IAAI6V,IAAI7V,QAAQ,YAAR,CAAR;;AAEAC,OAAOC,OAAP,GAAiB,UAACia,GAAD,EAAS;;AAExBA,MAAItB,MAAJ,CAAW,CAAC,gBAAD,EAAmB,oBAAnB,EAAyC,UAACuB,cAAD,EAAiBC,kBAAjB,EAAwC;;AAE1F;AACAD,mBACAE,KADA,CACM,OADN,EACe;AACbnB,WAAK,GADQ;AAEboB,gBAAUva,QAAQ,aAAR,CAFG;AAGbwa,eAAS;AACPpW,YAAI,YAACzD,MAAD;AAAA,iBAAYA,OAAOyD,EAAP,EAAZ;AAAA,SADG;AAEPxD,iBAAS,i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","file":"public/app.js","sourcesContent":["\"use strict\";\n\nconst co = require('co');\n\nmodule.exports = ($scope, version, UIUtils) => {\n\n  $scope.version = version;\n\n  return co(function*() {\n    $scope.$parent.title = yield UIUtils.translate('help.about_duniter.title');\n  });\n};\n","\"use strict\";\n\nvar co = require('co');\n\nmodule.exports = ($scope, $http, $state, Webmin, summary, UIUtils) => {\n\n  UIUtils.changeTitle(summary.version);\n\n  $scope.message = 'index.message.loading';\n  co(function *() {\n    let connected = false;\n    try {\n      let summary = yield Webmin.summary();\n      if (summary.current) {\n        return $state.go('main.home.overview');\n      }\n      return $state.go('configure.choose');\n    }\n    catch (e) {\n      console.error(connected, e);\n      if (!connected) {\n        return $state.go('error', { err: 'err.connection'});\n      }\n      return $state.go('error', { err: e });\n    }\n  });\n};\n","\"use strict\";\n\nvar conf = require('js/lib/conf/conf');\n\nmodule.exports = ($scope, $state, PubkeyGenerator) => {\n\n  setTimeout(() => {\n    $('select').material_select();\n  }, 500);\n\n  $scope.accept = () => {\n    let modal = $('#modal1');\n    if (modal.css('display') == 'none') {\n      $('#modal1').openModal();\n    }\n  };\n\n  PubkeyGenerator($scope);\n\n  if (conf.dev_autoconf) {\n    $scope.$parent.conf.idty_uid = 'dev_' + ~~(Math.random() * 2147483647);\n    $scope.$parent.conf.idty_entropy = ~~(Math.random() * 2147483647) + \"\";\n    $scope.$parent.conf.idty_password = ~~(Math.random() * 2147483647) + \"\";\n    $state.go('configure.create.network');\n  }\n};\n","\"use strict\";\n\nmodule.exports = ($scope, UIUtils) => {\n\n  UIUtils.enableInputs();\n};\n","\"use strict\";\n\nvar co = require('co');\nvar conf = require('js/lib/conf/conf');\n\nmodule.exports = ($scope, $http, $state, Webmin) => {\n\n  $scope.generated = '';\n  $scope.started = false;\n  $scope.message = 'configuration.create_root.need_a_try';\n\n  $scope.start = () => co(function *() {\n    try {\n      let hosts = [];\n      if ($scope.$parent.conf.remote_ipv4) {\n        hosts.push([$scope.$parent.conf.remote_ipv4, $scope.$parent.conf.rport].join(':'));\n      }\n      if ($scope.$parent.conf.remote_ipv6) {\n        hosts.push([\"[\" + $scope.$parent.conf.remote_ipv6 + \"]\", $scope.$parent.conf.rport].join(':'));\n      }\n      $scope.host_listening = hosts.join('\\n');\n      $scope.started = true;\n      yield Webmin.server.sendConf({\n        conf: $scope.$parent.conf\n      });\n      yield $scope.try();\n    } catch (e) {\n      $scope.message = e.message;\n    }\n  });\n\n  $scope.stop = () => co(function *() {\n    $scope.started = false;\n  });\n\n  $scope.try = () => co(function *() {\n    try {\n      $scope.block = yield Webmin.server.previewNext();\n      $scope.generated = $scope.block.raw;\n      $scope.message = '';\n    } catch (e) {\n      $scope.message = e.message;\n    }\n  });\n\n  $scope.accept = () => co(function *() {\n    let res = yield Webmin.blockchain.block_add({\n      block: $scope.generated\n    });\n    if (res.number == 0) {\n      // We successfully started the blockchain\n      yield $scope.startServices();\n    }\n  });\n\n  $scope.startServices = () => co(function *() {\n    yield Webmin.server.services.startAll();\n    $state.go('index');\n  });\n\n  $scope.cancelAndReset = () => co(function *() {\n    yield Webmin.server.services.stopAll();\n    yield Webmin.server.resetData();\n    $state.go('index');\n  });\n\n  return co(function *() {\n    try {\n      yield $scope.start();\n      yield $scope.try();\n      $scope.started = true;\n    } catch (e) {\n      $scope.started = false;\n    }\n  });\n};\n","\"use strict\";\n\nvar co = require('co');\n\nmodule.exports = ($scope, $http, $state, $timeout, $stateParams, $translate, UIUtils, Webmin) => {\n\n  let syncWS = Webmin.ws();\n\n  UIUtils.enableInputs();\n  $scope.sync_mode = 'simplified';\n  $scope.simplified_host = '';\n  $scope.synchronizing = false;\n  $scope.sync_failed = false;\n  $scope.host = $stateParams.host || localStorage.getItem('sync_host') || '';\n  $scope.port = parseInt($stateParams.port) || parseInt(localStorage.getItem('sync_port')) || 10901;\n  $scope.to = parseInt($stateParams.to);\n  $scope.wrong_host = false;\n  $scope.remote_current = null;\n\n  $scope.checkNode = () => co(function *() {\n    $scope.checked_host = '';\n    $scope.sync_error = '';\n    $scope.sync_message = '';\n    if ($scope.sync_mode == 'simplified') {\n      $scope.host = $scope.simplified_host.split(':')[0];\n      $scope.port = parseInt($scope.simplified_host.split(':')[1]);\n    }\n    $scope.checking = true;\n    try {\n      const current = yield Webmin.server.testSync({\n        host: $scope.host,\n        port: $scope.port\n      });\n      const targetHost = [$scope.host, $scope.port].join(':');\n      if (current) {\n        $scope.remote_current = current;\n        $scope.checked_host = targetHost;\n      }\n      UIUtils.toast('sync.ready.node.part1');\n      $timeout(() => {\n        if (!$scope.synchronizing) {\n          UIUtils.toast('sync.ready.node.part2');\n        }\n      }, 6000);\n    } catch (e) {\n      $scope.sync_error = 'sync.error.unreachable.try.another.node';\n    }\n    $scope.checking = false;\n    return $scope.checked_host ? true : false;\n  });\n\n  $scope.startSync = () => {\n    $scope.down_percent = 0;\n    $scope.apply_percent = 0;\n    $scope.sync_failed = false;\n    $scope.synchronizing = true;\n    return co(function *() {\n      $scope.sync_message = (yield $translate('sync.started.node')) + ' ' + $scope.checked_host;\n      let sp = $scope.checked_host.split(':');\n      let translatedErr = yield $translate('err.sync.interrupted');\n      syncWS.on(undefined, (data) => {\n        if (data.type == 'sync') {\n          $scope.down_percent = 100;\n          $scope.apply_percent = 100;\n          $scope.sync_failed = data.value;\n          let errorMessage = data.msg && (data.msg.message || data.msg);\n          errorMessage = translatedErr + ' « ' + errorMessage + ' »';\n          Webmin.server.republishNewSelfPeer()\n            .then(() => console.log('Peer republished'));\n          if (data.value === true) {\n            $state.go('index');\n          } else {\n            $state.go('error', { err: (errorMessage) });\n          }\n        } else {\n          let changed = true;\n          if (data.type == 'download' && $scope.down_percent != data.value) {\n            $scope.down_percent = data.value;\n            changed = true;\n          }\n          if (data.type == 'applied' && $scope.apply_percent != data.value) {\n            $scope.apply_percent = data.value;\n            changed = true;\n          }\n          if (changed) {\n            $scope.$apply();\n          }\n        }\n      });\n      yield Webmin.server.autoConfNetwork();\n      localStorage.setItem(\"sync_host\", sp[0]);\n      localStorage.setItem(\"sync_port\", sp[1]);\n      Webmin.server.startSync({\n        host: sp[0],\n        port: sp[1],\n        to: $scope.to,\n        chunkLen: Math.max(500, Math.min(25, $scope.remote_current ? $scope.remote_current.number / 100 : 0))\n      });\n    });\n  };\n\n  // Autostart\n  if ($scope.host && $scope.port && $stateParams.sync) {\n    return co(function *() {\n      let nodeOK = yield $scope.checkNode();\n      if (nodeOK) {\n        return $scope.startSync();\n      }\n    });\n  }\n};\n","\"use strict\";\n\nvar co = require('co');\n\nmodule.exports = ($scope, $state, $http, $timeout, $interval, Webmin, summary, UIUtils, Base58) => {\n\n  const local_host = summary.host.split(':')[0]; // We suppose IPv4 configuration\n  const local_port = summary.host.split(':')[1];\n  const local_sign_pk = Base58.decode(summary.pubkey);\n  const local_sign_sk = Base58.decode(summary.seckey);\n\n  const DEFAULT_CESIUM_SETTINGS = {\n    \"useRelative\": true,\n    \"timeWarningExpire\": 2592000,\n    \"useLocalStorage\": true,\n    \"rememberMe\": true,\n    \"plugins\": {},\n    \"node\": {\n      \"host\": local_host,\n      \"port\": local_port\n    },\n    \"showUDHistory\": true\n  };\n\n  $scope.notifications = {\n    help: []\n  };\n\n  Waves.displayEffect();\n\n  var isMobile = require('js/lib/mobileDetector');\n  if (isMobile()) {\n    $(\".button-collapse\").sideNav({\n      menuWidth: 280\n    });\n  }\n\n  UIUtils.changeTitle(summary.version);\n\n  $scope.openWallet = () => {\n\n    let walletHeight = parseInt(localStorage.getItem('wallet_height')) || 1000;\n    let walletWidth = parseInt(localStorage.getItem('wallet_width')) || 1400;\n\n    openNewTab (window.location.origin + '/cesium/index.html', {\n      position: 'center',\n      height: walletHeight,\n      width: walletWidth,\n      show: false\n    }, function(win) {\n      let settingsStr = win.window.localStorage.getItem('CESIUM_SETTINGS');\n      let dataStr = win.window.localStorage.getItem('CESIUM_DATA');\n      let settings = (settingsStr && JSON.parse(settingsStr));\n      let data = (dataStr && JSON.parse(dataStr));\n      let keyPairOK = data && data.keypair && data.keypair.signPk && data.keypair.signSk && true;\n      if (keyPairOK) {\n        data.keypair.signPk.length = local_sign_pk.length;\n        data.keypair.signSk.length = local_sign_sk.length;\n        keyPairOK = Base58.encode(Array.from(data.keypair.signPk)) == summary.pubkey\n          && Base58.encode(Array.from(data.keypair.signSk)) == summary.seckey\n          && data.pubkey == summary.pubkey;\n      }\n      if (!data\n        || !keyPairOK\n        || settings.node.host != local_host\n        || settings.node.port != local_port) {\n        settings = settings || DEFAULT_CESIUM_SETTINGS;\n        data = data || {};\n        console.debug('Configuring Cesium...');\n        settings.node = {\n          \"host\": local_host,\n          \"port\": local_port\n        };\n        settings.plugins = {};\n        settings.rememberMe = true;\n        data.pubkey = summary.pubkey;\n        data.keypair = {\n          signPk: local_sign_pk,\n          signSk: local_sign_sk\n        };\n        win.window.localStorage.setItem('CESIUM_SETTINGS', JSON.stringify(settings));\n        win.window.localStorage.setItem('CESIUM_DATA', JSON.stringify(data));\n        win.on('closed', () => {\n          // Reopen the wallet\n          $timeout(() => $scope.openWallet(), 1);\n        });\n        win.close();\n      } else {\n        // Cesium is correctly configured for the network part\n        win.show();\n        win.on('closed', function() {\n          localStorage.setItem('wallet_height', win.window.innerHeight - 8); // Seems to always have 8 pixels more\n          localStorage.setItem('wallet_width', win.window.innerWidth - 16); // Seems to always have 16 pixels more\n          mainWindow.focus();\n        });\n      }\n    });\n  };\n\n  let aboutWin;\n\n  $scope.showAbout = () => {\n    if (aboutWin) {\n      aboutWin.focus();\n    } else {\n      openWindow(window.location.origin + '/#/about', {\n        position: 'center',\n        height: 380,\n        width: 510\n      }, function(subwin) {\n        subwin.window.gui = window.gui;\n        subwin.on('closed', () => {\n          aboutWin = null;\n          mainWindow.focus();\n        });\n        aboutWin = subwin;\n      });\n    }\n  };\n\n  $scope.startServer = () => {\n    $scope.server_stopped = false;\n    return co(function *() {\n      yield Webmin.server.services.startAll();\n      $scope.server_started = true;\n    });\n  };\n\n  $scope.stopServer = () => {\n    $scope.server_started = false;\n    return co(function *() {\n      yield Webmin.server.services.stopAll();\n      $scope.server_stopped = true;\n    });\n  };\n\n  $scope.restartServer = () => {\n    return co(function *() {\n      yield $scope.stopServer();\n      yield $scope.startServer();\n    });\n  };\n\n  function checkUpdates() {\n    const LATEST_RELEASE_URL = 'https://api.github.com/repos/duniter/duniter/releases/latest';\n    co(function*() {\n      try {\n        const latest = yield $http.get(LATEST_RELEASE_URL);\n        const local_string_version = 'v' + summary.version;\n        const m = local_string_version.match(/^v([\\d.]+)([ab]?\\d*)/);\n        const localVersion = (m && m[1]) || \"\";\n        const localSuffix = m && m[2];\n        const isLocalAPreRelease = !!(localSuffix);\n        const remoteVersion = latest.data.tag_name.substr(1);\n        if (localVersion < remoteVersion || (localVersion == remoteVersion && isLocalAPreRelease)) {\n          if ($scope.notifications.help.filter((entry) => entry.message == 'help.new_version_available').length == 0) {\n            $scope.notifications.help.push({\n              icon: 'play_for_work',\n              message: 'help.new_version_available',\n              onclick: () => openExternal('https://github.com/duniter/duniter/releases/latest')\n            });\n          }\n        }\n      } catch (e) {\n        console.error(e);\n      }\n    });\n  }\n\n  $interval(checkUpdates, 1000 * 3600);\n  $timeout(checkUpdates, 1000);\n};\n","\"use strict\";\n\nconst BLOCKS_COUNT = 40;\n\nvar co = require('co');\n\nmodule.exports = ($scope, $state, $timeout, Webmin, UIUtils, Graph) => {\n\n  let data = {};\n\n  $scope.loading = true;\n  $scope.blocksCount = $scope.blocksCount || BLOCKS_COUNT;\n\n  $scope.$watch('withTime', (newValue) => {\n    if (newValue) {\n      timeGraph();\n    }\n  });\n\n  $scope.$watch('withSpeed', (newValue) => {\n    if (newValue) {\n      speedGraph();\n    }\n  });\n\n  $scope.$watch('withDifficulty', (newValue) => {\n    if (newValue) {\n      diffGraph();\n    }\n  });\n\n  $scope.updateGraphs = () => {\n    return co(function *() {\n      let summary = yield Webmin.summary();\n      let parameters = yield Webmin.currency.parameters();\n      let blocks = yield Webmin.blockchain.blocks({\n        count: $scope.blocksCount,\n        from: Math.max(0, summary.current.number - $scope.blocksCount)\n      });\n      let speeds = [], accelerations = [], medianTimeIncrements = [], actualDurations = [];\n      let BY_HOUR = 3600;\n      for (let i = 0, len = blocks.length; i < len; i++) {\n        let block = blocks[i];\n        let acc = 0;\n        let previousPos = Math.max(0, i - parameters.dtDiffEval);\n        for (let j = previousPos; j < i; j++) {\n          acc += (blocks[j+1].medianTime - blocks[j].medianTime);\n        }\n        let availPreviousBlocks = i - 1 - previousPos;\n        let localAvgSpeed = acc / (availPreviousBlocks || 1);\n        let realDuration = !isNaN(localAvgSpeed) && localAvgSpeed != 0 ? localAvgSpeed : parameters.avgGenTime;\n        actualDurations.push(parseFloat((realDuration).toFixed(2)));\n        speeds.push(parseFloat((BY_HOUR/realDuration).toFixed(2)));\n        accelerations.push(block.time - block.medianTime);\n        medianTimeIncrements.push(block.medianTime - (i ? blocks[i-1].medianTime : block.medianTime));\n      }\n      data.summary = summary;\n      data.speeds = speeds;\n      data.accelerations = accelerations;\n      data.medianTimeIncrements = medianTimeIncrements;\n      data.actualDurations = actualDurations;\n      data.minSpeeds = speeds.map(() => parseFloat((BY_HOUR/Math.ceil(parameters.avgGenTime * Math.sqrt(1.066))).toFixed(2)));\n      data.maxSpeeds = speeds.map(() => parseFloat((BY_HOUR/Math.floor(parameters.avgGenTime / Math.sqrt(1.066))).toFixed(2)));\n      data.minDurations = speeds.map(() => parseFloat(((parameters.avgGenTime / 1.066)).toFixed(2)));\n      data.maxDurations = speeds.map(() => parseFloat(((parameters.avgGenTime * 1.066)).toFixed(2)));\n      data.difficulties = blocks.map((b) => b.powMin);\n\n      let graphs = [];\n      if ($scope.withTime) graphs.push(timeGraph);\n      if ($scope.withSpeed) graphs.push(speedGraph);\n      if ($scope.withDifficulty) graphs.push(diffGraph);\n      for (let i = 0, len = graphs.length; i < len; i++) {\n        graphs[i]();\n      }\n      $scope.loading = false;\n    });\n  };\n\n  function timeGraph() {\n    if ($scope.withTime) {\n      Graph.timeGraphs('#timeGraph', Math.max(0, data.summary.current.number - $scope.blocksCount + 1), data.accelerations, data.medianTimeIncrements, data.actualDurations, data.minDurations, data.maxDurations);\n    }\n  }\n\n  function speedGraph() {\n    if ($scope.withSpeed) {\n      Graph.speedGraph('#speedGraph', Math.max(0, data.summary.current.number - $scope.blocksCount), data.speeds, data.minSpeeds, data.maxSpeeds, (series) => {\n        $scope.series = series;\n      });\n    }\n  }\n\n  function diffGraph() {\n    if ($scope.withDifficulty) {\n      Graph.difficultyGraph('#difficultyGraph', Math.max(0, data.summary.current.number - $scope.blocksCount), data.difficulties);\n    }\n  }\n\n  return co(function *() {\n    yield $scope.updateGraphs();\n    $scope.withTime = true;\n    $scope.withDifficulty = true;\n    $scope.$apply();\n  });\n};\n","\"use strict\";\n\nmodule.exports = ($scope, UIUtils) => {\n\n  UIUtils.enableTabs();\n\n  $scope.$parent.menu = 'graphs';\n};\n","\"use strict\";\n\nmodule.exports = ($scope, UIUtils) => {\n\n  UIUtils.enableTabs();\n\n  $scope.$parent.menu = 'home';\n};\n","\"use strict\";\n\nmodule.exports = ($scope, Webmin, peers) => {\n\n  $scope.peers = peers.peers;\n\n  const co = require('co');\n\n  $scope.update = () => co(function *() {\n    $scope.searching = true;\n    let delayP = Q.delay(500);\n    $scope.peers = (yield Webmin.network.peers()).peers;\n    yield delayP;\n    $scope.searching = false;\n    $scope.$apply();\n  });\n};\n","\"use strict\";\n\nmodule.exports = ($scope, $interval, Webmin, UIUtils, summary, ws) => {\n\n  let co = require('co');\n  let moment = require('moment');\n\n  bindBlockWS(() => {\n    $scope.loadPowData();\n  });\n  let M = summary.current.monetaryMass || 0;\n  // const nbUDperYear = Math.ceil(365.25 * 3600 * 24 / summary.parameters.dt);\n  // const globalC = Math.round(Math.pow(1 + summary.parameters.c, nbUDperYear) * 100) / 100 - 1;\n  let UD = summary.parameters.ud0;\n  if (summary.lastUDBlock) {\n    const N = summary.current.membersCount;\n    UD = parseInt((summary.lastUDBlock.dividend * Math.pow(10, summary.lastUDBlock.unitbase) + Math.pow(summary.parameters.c, 2) * M / N).toFixed(0));\n  }\n  $scope.current = summary.current;\n  $scope.current_currency = summary.current.currency;\n  $scope.current_number = summary.current.number;\n  $scope.current_membersCount = summary.current.membersCount;\n  $scope.current_medianTime = summary.current.medianTime;\n  $scope.current_powMin = summary.current.powMin;\n  $scope.monetaryMass = parseInt(M / UD) || 0;\n  $scope.server_started = true;\n  $scope.server_stopped = false;\n  $scope.phones = [];\n  $scope.abc = 'abcdef';\n  $scope.newIdentities = 2;\n\n  $(\".dropdown-button\").dropdown({ constrainwidth: false });\n\n  $scope.lastNearPoW = '';\n  $scope.totalPoW = '...';\n  $scope.sync_state = 'home.pulling.state.unkown';\n  $scope.network_percent = 0;\n  $scope.peer_percent = 0;\n  $scope.has_pulled = false;\n  $scope.is_pulling = false;\n  $scope.last_pulling = 0;\n  let start_block = 0;\n\n  $interval(() => {\n    if ($scope.last_pulling) {\n      $scope.sync_state = $scope.is_pulling ? 'home.pulling.state.syncing' : 'home.pulling.state.synced';\n      $scope.sync_time = moment($scope.last_pulling).fromNow();\n    }\n  }, 1000);\n\n  $scope.loadPowData = () => co(function*() {\n    let res = yield Webmin.powSummary();\n    $scope.pow_total = res.total;\n    $scope.pow_mirror = res.mirror;\n    $scope.pow_waiting = res.waiting;\n  });\n\n  ws.on(undefined, (data) => {\n    if (data.type === 'started') {\n      $scope.server_started = true;\n      $scope.server_stopped = false;\n      bindBlockWS(() => {\n        $scope.loadPowData();\n      });\n      UIUtils.toast('general.server.started');\n      $scope.$apply();\n    }\n    if (data.type === 'stopped') {\n      $scope.server_stopped = true;\n      $scope.server_started = false;\n      UIUtils.toast('general.server.stopped');\n      $scope.$apply();\n    }\n    if (data.type === 'pulling') {\n      $scope.is_pulling = true;\n      $scope.has_pulled = true;\n      const event = data.value;\n      if (($scope.last_pulling && event.type === 'start') || (!$scope.last_pulling && event.type !== 'end')) {\n        $scope.last_pulling = moment();\n      }\n      if (event.type === 'peer') {\n        $scope.network_percent = parseInt((event.data.number + 1) / event.data.length * 100);\n        $scope.peer_percent = 100;\n        start_block = 0;\n      }\n      if (event.type === 'applying') {\n        if (!start_block) {\n          start_block = event.data.number;\n        }\n        const total = event.data.last - start_block;\n        const doneCount = event.data.number - start_block;\n        $scope.peer_percent = parseInt(doneCount / total * 100);\n      }\n      if (event.type === 'end') {\n        $scope.is_pulling = false;\n        $scope.network_percent = 0;\n        $scope.peer_percent = 0;\n        start_block = 0;\n      }\n    }\n    if (data.type === 'pow') {\n      const pow = data.value;\n      if (pow.found) {\n        $scope.pow_waiting = true;\n        $scope.lastNearPoW = '#' + pow.hash;\n        $scope.$apply();\n      } else {\n        $scope.pow_waiting = false;\n        $scope.lastNearPoW = '#' + pow.hash;\n        $scope.$apply();\n      }\n    }\n  });\n\n  function bindBlockWS(cb) {\n    Webmin.wsBlock().on(undefined, (block) => {\n      $scope.current_currency = block.currency;\n      $scope.current_number = block.number;\n      $scope.current_membersCount = block.membersCount;\n      $scope.current_medianTime = block.medianTime;\n      $scope.current_powMin = block.powMin;\n      let M = summary.current.monetaryMass || 0;\n      let UD = summary.parameters.ud0;\n      if (summary.lastUDBlock) {\n        const N = summary.current.membersCount;\n        UD = parseInt(Math.round(summary.lastUDBlock.dividend * Math.pow(10, summary.lastUDBlock.unitbase) + Math.pow(summary.parameters.c, 2) * M / N).toFixed(0));\n      }\n      $scope.monetaryMass = parseInt(M / UD) || 0;\n      $scope.$apply();\n      cb && cb();\n    });\n  }\n  \n  $scope.reconfigure_network = () => co(function *() {\n    $scope.reconfiguring = true;\n    let delay = Q.delay(1000);\n    try {\n      let netinferfaces = yield Webmin.network.interfaces();\n      let conf = {};\n      conf.local_ipv4 = netinferfaces.auto.local.ipv4 || '';\n      conf.local_ipv6 = netinferfaces.auto.local.ipv6 || '';\n      conf.remote_ipv4 = netinferfaces.auto.remote.ipv4 || '';\n      conf.remote_ipv6 = netinferfaces.auto.remote.ipv6 || '';\n      conf.lport = netinferfaces.auto.local.port || 9330;\n      conf.rport = netinferfaces.auto.remote.port || 9330;\n      conf.upnp = netinferfaces.auto.remote.upnp || false;\n      conf.dns = netinferfaces.auto.remote.dns || '';\n      yield Webmin.server.netConf({\n        conf: conf\n      });\n      yield delay;\n      $scope.should_reconfigure = false;\n      UIUtils.toast('general.network.reconf_ok');\n      $scope.$apply();\n    } catch (e) {\n      yield delay;\n      $scope.reconfiguring = false;\n      $scope.$apply();\n    }\n  });\n\n  return co(function *() {\n    yield $scope.startServer();\n    try {\n      yield $scope.loadPowData();\n      const reachable = yield Webmin.isNodePubliclyReachable();\n      if (!reachable || !reachable.success) {\n        $scope.should_reconfigure = true;\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  });\n};\n","\"use strict\";\n\nvar co = require('co');\n\nmodule.exports = ($scope, $http, $state, $location, Webmin, UIUtils) => {\n\n  UIUtils.enableTabs();\n\n  $scope.$parent.conf = $scope.$parent.conf || {};\n  $scope.$parent.menu = 'settings';\n\n  $(\".dropdown-button\").dropdown({ constrainwidth: false });\n\n  $scope.fullReset = () => co(function *() {\n    yield Webmin.server.services.stopAll();\n    yield Webmin.server.resetData();\n    $state.go('index');\n  });\n};\n","\"use strict\";\n\nmodule.exports = ($scope, Importer, Webmin) => {\n\n  $scope.export_link = Webmin.getExportURL();\n\n  Importer($scope);\n};\n","\"use strict\";\n\nconst co = require('co');\n\nmodule.exports = ($scope, $http, $state, $timeout, UIUtils, summary, Webmin) => {\n\n  $scope.cpuPower = parseInt(summary.conf.cpu * 100);\n\n  $scope.updateCPUpower = () => co(function *() {\n    $scope.savingCPU = true;\n    yield Webmin.server.cpuConf({\n      cpu: parseFloat(($scope.cpuPower / 100).toFixed(2))\n    });\n    UIUtils.toast('settings.cpu.saved');\n    $scope.savingCPU = false;\n  });\n};\n","\"use strict\";\n\nmodule.exports = ($scope, conf, UIUtils) => {\n\n  $scope.$parent.conf = conf;\n\n  UIUtils.enableInputs();\n  $('input').attr('disabled', 'disabled');\n};\n","\"use strict\";\n\nvar co = require('co');\nvar Peer = require('js/lib/entity/peer');\n\nmodule.exports = ($scope, $http, $state, Webmin, peers) => {\n\n  $scope.peers = peers.map((peer) => {\n    let p = new Peer(peer);\n    return {\n      name: [p.getURL(), \"(\" + p.pubkey.slice(0, 6) + \")\"].join(' '),\n      host_port: [p.getHost(), p.getPort()].join('|')\n    }\n  });\n\n  $scope.resetNode = () => {\n    $('#modalReset').openModal();\n  };\n\n  $scope.resetNodeAndSync = () => co(function *() {\n    yield Webmin.server.services.stopAll();\n    yield Webmin.server.resetData();\n    let sp = $scope.remote_host.split('|');\n    $state.go('sync', {\n      host: sp[0],\n      port: sp[1],\n      sync: true\n    })\n  });\n};\n","\"use strict\";\n\nvar co = require('co');\n\nmodule.exports = ($scope, $state, Webmin, summary, PubkeyGenerator) => {\n\n  $scope.pubkey = summary.pubkey;\n\n  setTimeout(() => {\n    $('select').material_select();\n  }, 500);\n\n  $scope.accept = () => co(function *() {\n    yield Webmin.server.keyConf({\n      conf: $scope.$parent.conf\n    });\n    $scope.$parent.conf.idty_entropy = '';\n    $scope.$parent.conf.idty_password = '';\n    $state.reload();\n    $scope.restartServer();\n  });\n\n  PubkeyGenerator($scope);\n};\n","\"use strict\";\n\nmodule.exports = ($scope, ws, UIUtils) => {\n\n  UIUtils.enableTabs();\n\n  let co = require('co');\n  let _ = require('underscore');\n\n  // Default values\n  if (!localStorage.getItem('log_error')) localStorage.setItem('log_error', true);\n  if (!localStorage.getItem('log_warn')) localStorage.setItem('log_warn', true);\n  if (!localStorage.getItem('log_info')) localStorage.setItem('log_info', true);\n\n  $scope.logsSize = parseInt(localStorage.getItem('log_size')) || 100;\n  $scope.logs = _.range(0, $scope.logsSize).map(() => \"\");\n  $scope.logsString = \"\";\n  $scope.follow = true;\n  $scope.levels = {\n    error: localStorage.getItem('log_error') == \"true\",\n    warn: localStorage.getItem('log_warn') == \"true\",\n    info: localStorage.getItem('log_info') == \"true\",\n    debug: localStorage.getItem('log_debug') == \"true\",\n    trace: localStorage.getItem('log_trace') == \"true\"\n  };\n\n  _.keys($scope.levels).map((level) => {\n    $scope.$watch('levels.' + level, (newValue) => {\n      localStorage.setItem('log_' + level, newValue);\n      $scope.logs.splice(0, $scope.logs.length);\n      ws.send();\n    });\n  });\n\n  $scope.$watch('logsSize', (newValue) => {\n    localStorage.setItem('log_size', newValue);\n    addLogs({ value: [] }, true);\n  });\n\n  ws.on('log', addLogs);\n\n  function addLogs(res, autoDigest) {\n\n    if (!$scope.pause) {\n      let newlogs = _.filter(res.value, (log) => $scope.levels[log.level]);\n      // Add at max LOGS_FLOW_SIZE new lines\n      newlogs.splice(0, Math.max(0, newlogs.length - $scope.logsSize));\n      // Add just enough space for incoming logs\n      $scope.logs.splice(0, Math.max(0, $scope.logs.length + newlogs.length - $scope.logsSize));\n      for (let i = 0, len = newlogs.length; i < len; i++) {\n        let log = newlogs[i];\n        $scope.logs.push(log);\n      }\n      if (!autoDigest) {\n        $scope.$apply();\n      }\n    }\n\n    if ($scope.follow) {\n      var elem = document.getElementById('logs');\n      if (elem) {\n        elem.scrollTop = elem.scrollHeight;\n      }\n    }\n  }\n\n  return co(function *() {\n    yield ws.whenOpened();\n    ws.send();\n  });\n};\n","\"use strict\";\n\nconst co = require('co');\n\nmodule.exports = ($scope, Webmin) => {\n  \n  $scope.generating = false;\n  $scope.error = '';\n\n  $scope.shareLogs = () => co(function*() {\n    if (!$scope.generating) {\n      try {\n        $scope.error = '';\n        $scope.generating = true;\n        const res = yield Webmin.logsExport(2000);\n        $scope.link = res.link;\n      } catch (e) {\n        $scope.error = (e && e.message) || e || 'Unknown error';\n      }\n      $scope.generating = false;\n    }\n  });\n};\n","\"use strict\";\n\nvar co = require('co');\nvar conf = require('js/lib/conf/conf');\n\nmodule.exports = ($scope, $http, $state, Webmin, UIUtils, netinterfaces, firstConf) => {\n\n  let autoconf = netinterfaces.auto;\n\n  $scope.autoconfig = () => {\n    $scope.$parent.conf.local_ipv4 = autoconf.local.ipv4 || '';\n    $scope.$parent.conf.local_ipv6 = autoconf.local.ipv6 || '';\n    $scope.$parent.conf.remote_ipv4 = autoconf.remote.ipv4 || '';\n    $scope.$parent.conf.remote_ipv6 = autoconf.remote.ipv6 || '';\n    $scope.$parent.conf.lport = autoconf.local.port || $scope.$parent.conf.lport;\n    $scope.$parent.conf.rport = autoconf.remote.port || $scope.$parent.conf.rport;\n    $scope.$parent.conf.upnp = autoconf.remote.upnp || $scope.$parent.conf.upnp;\n    $scope.$parent.conf.dns = autoconf.remote.dns || $scope.$parent.conf.dns;\n\n    if (conf.dev_autoconf && firstConf) {\n      $state.go('configure.create.root');\n    }\n  };\n\n  $scope.local_neti = toArrayOfAddresses(netinterfaces.local);\n  $scope.remote_neti = toArrayOfAddresses(netinterfaces.remote);\n\n  $scope.$parent.conf = $scope.$parent.conf || {};\n  $scope.$parent.conf.local_ipv4 = netinterfaces.conf.local.ipv4;\n  $scope.$parent.conf.local_ipv6 = netinterfaces.conf.local.ipv6;\n  $scope.$parent.conf.remote_ipv4 = netinterfaces.conf.remote.ipv4;\n  $scope.$parent.conf.remote_ipv6 = netinterfaces.conf.remote.ipv6;\n  $scope.$parent.conf.lport = netinterfaces.conf.local.port;\n  $scope.$parent.conf.rport = netinterfaces.conf.remote.port;\n  $scope.$parent.conf.upnp = netinterfaces.conf.remote.upnp;\n  $scope.$parent.conf.dns = netinterfaces.conf.remote.dns;\n\n  UIUtils.enableInputs();\n\n  if (firstConf) {\n    $scope.$parent.conf.lport = conf.default_port;\n    $scope.$parent.conf.rport = conf.default_port;\n    // Trigger autoconfig\n    $scope.autoconfig();\n  }\n\n  $scope.saveConf = () => co(function *() {\n    $scope.$parent.conf.remote_ipv6 = $scope.$parent.conf.local_ipv6;\n    yield Webmin.server.netConf({\n      conf: $scope.$parent.conf\n    });\n    UIUtils.toast('settings.network.saved');\n  });\n};\n\nfunction toArrayOfAddresses(netiScope) {\n  return netiScope.reduce(function(arr, neti) {\n    return arr.concat(neti.addresses.map((addr) => {\n      return {\n        name: [neti.name, addr.address].join(' '),\n        addr: addr.address,\n        family: addr.family\n      };\n    }))\n  }, []);\n}\n","module.exports = () => {\n  require('./services/webmin')(angular);\n\n  const duniterApp = angular.module('duniterUIApp', [\n    'ui.router',\n    'homeControllers',\n    'pascalprecht.translate'\n  ]);\n\n  duniterApp.config( [\n    '$compileProvider', ($compileProvider) => $compileProvider.aHrefSanitizationWhitelist(/^\\s*(https?|data):/)\n  ]);\n\n  require('./lib/conf/translate')(duniterApp);\n  require('./lib/conf/routes')(duniterApp);\n  require('js/services/datetime')(duniterApp);\n  require('js/services/ui_utils')(duniterApp);\n  require('js/services/graphs')(duniterApp);\n  require('js/services/pubkeyGenerator')(duniterApp);\n  require('js/services/importer')(duniterApp);\n  require('js/services/base58')(duniterApp);\n\n  window.duniterChildCallback = function(gui) {\n    window.gui = gui;\n  };\n\n  window.onresize = () => {\n    window.onResize && window.onResize(window);\n  };\n\n  window.openWindow = function openWindow(url, options, callback) {\n    if (window.gui) {\n      // Duniter Desktop\n      window.gui.Window.open(url, options, callback);\n    } else {\n      // Browser\n      let innerHeight = options.height || 375;\n      let innerWidth = options.width || 500;\n      window.open(url, '_blank ', [\n        'top=' + (window.screenTop + (options.top || 200)),\n        'left=' + (window.screenLeft + (options.left || 200)),\n        'height=' + (innerHeight + 8),\n        'width=' + (innerWidth + 16),\n        'menubar=no',\n        'status=no'\n      ].join(','));\n    }\n  };\n\n  window.openNewTab = function openWindow(url, options, callback) {\n    if (window.gui) {\n      // Duniter Desktop\n      window.gui.Window.open(url, options, callback);\n    } else {\n      // Browser\n      window.open(url, '_blank ');\n    }\n  };\n\n  window.openExternal = function openExternal(url) {\n    if (window.gui) {\n      window.gui.Shell.openExternal(url);\n    } else {\n      window.open(url, '_blank');\n    }\n  };\n\n  let homeControllers = angular.module('homeControllers', ['duniter.services.webmin', 'ngFileUpload']);\n\n  homeControllers.controller('IndexController',            require('./controllers/IndexController'));\n  homeControllers.controller('AboutController',            require('./controllers/AboutController'));\n  homeControllers.controller('IdentityController',         require('./controllers/init/create/IdentityController'));\n  homeControllers.controller('ParametersController',       require('./controllers/init/create/ParametersController'));\n  homeControllers.controller('RootBlockController',        require('./controllers/init/create/RootBlockController'));\n  homeControllers.controller('SyncController',             require('./controllers/init/sync/SyncController'));\n  homeControllers.controller('MainController',             require('./controllers/main/MainController'));\n  homeControllers.controller('HomeController',             require('./controllers/main/home/HomeController'));\n  homeControllers.controller('OverviewController',         require('./controllers/main/home/tabs/OverviewController'));\n  homeControllers.controller('HomeNetworkController',      require('./controllers/main/home/tabs/HomeNetworkController'));\n  homeControllers.controller('LogsController',             require('./controllers/main/settings/tabs/LogsController'));\n  homeControllers.controller('LogsSettingsController',     require('./controllers/main/settings/tabs/LogsSettingsController'));\n  homeControllers.controller('NetworkController',          require('./controllers/main/settings/tabs/NetworkController'));\n  homeControllers.controller('SettingsController',         require('./controllers/main/settings/SettingsController'));\n  homeControllers.controller('DataController',             require('./controllers/main/settings/tabs/DataController'));\n  homeControllers.controller('BackupController',           require('./controllers/main/settings/tabs/BackupController'));\n  homeControllers.controller('CPUController',              require('./controllers/main/settings/tabs/CPUController'));\n  homeControllers.controller('CurrencyController',         require('./controllers/main/settings/tabs/CurrencyController'));\n  homeControllers.controller('KeyController',              require('./controllers/main/settings/tabs/KeyController'));\n  homeControllers.controller('GraphsController',           require('./controllers/main/graphs/GraphsController'));\n  homeControllers.controller('GraphsBlockchainController', require('./controllers/main/graphs/GraphsBlockchainController'));\n};\n","\"use strict\";\n\nmodule.exports = {\n\n  init: () => {\n\n    // Hack since Node v5\n    try {\n      window.jade = require('jade' + '/' + 'runtime');\n    } catch (e) {\n    }\n\n    console.log('Configuring Angular app...');\n\n    require('./app.config')();\n\n    console.log('App initialized.');\n  }\n};\n","module.exports = {\n  server: \"\", // Empty server will use the browser current host\n  port: \"\",   // Empty port will use the browser current port\n  default_port: 9220,\n  dev_autoconf: false,\n  api_timeout: 10000 // 10 sec timeout\n};\n","module.exports = {\n  \"top.menu.overview\": \"Home\",\n  \"top.menu.data\": \"Explore\",\n  \"top.menu.settings\": \"Settings\",\n  \"top.menu.wallet\": \"Wallet\",\n  \"general.server.started\": \"Server started\",\n  \"general.server.stopped\": \"Server stopped\",\n  \"general.choose_option\": \"Choose your option\",\n  \"general.network.reconf_ok\": \"Reconfiguration success\",\n  \"global.button.validate\": \"Validate\",\n  \"global.button.start\": \"Start\",\n  \"err.unknown\": \"Unknown error\",\n  \"err.connection\": \"Could not connect to node\",\n  \"err.back_index\": \"Get back to previous screen\",\n  \"err.sync.interrupted\": \"Sync interrupted because the following error occured:\",\n  \"index.message.loading\": \"Loading...\",\n  \"crypto.secret_key\": \"Secret key\",\n  \"index.message.current_block\": \"Current block {{ number }}\",\n  \"configuration.init.choose.title\": \"Initialization\",\n  \"configuration.init.choose.message\": \"Your software has to be initialized. You may either connect to an existing one or restore a backup file.\",\n  \"configuration.init.choose.create\": \"Create a new currency\",\n  \"configuration.init.choose.connect\": \"Connect to an existing currency\",\n  \"configuration.init.choose.import\": \"Import from a backup file\",\n  \"configuration.create_currency.cancel\": \"Cancel & go home\",\n  \"configuration.create_uid.title\": \"Your identity\",\n  \"configuration.create_uid.message\": \"As a first step, you need to define your personal, unique identity.<br/>The following informations will be <strong>definitive</strong> for this currency: please choose them carefully.\",\n  \"configuration.create_uid.uid.tooltip\": \"The name you will be known as.\",\n  \"configuration.create_uid.entropy.tooltip\": \"An entropy source to make your key unique: an e-mail, a phone n°, ...\",\n  \"configuration.create_uid.password.tooltip\": \"A secret password to protect your key.\",\n  \"configuration.create_uid.create_button\": \"Continue\",\n  \"configuration.create_uid.preview_button\": \"Preview pubkey\",\n  \"configuration.create_uid.nrp_algo_choose\": \"NRP algorithm\",\n  \"configuration.create_uid.nrp_algo_choose_1\": \"N = 4096 ; r = 16 ; p = 1\",\n  \"configuration.create_uid.modal_title\": \"Identity confirmation\",\n  \"configuration.create_uid.modal_message\": \"This identity will be definitive for this currency: you will be known by your User ID and will be able to access your account using your Secret Key and Password values.\",\n  \"configuration.create_uid.modal_agree\": \"Agree\",\n  \"configuration.create_uid.modal_disagree\": \"Disagree\",\n  \"configuration.create_uid.modal_preview_title\": \"Preview of pubkey\",\n  \"configuration.create_uid.modal_preview_ok\": \"OK\",\n  \"configuration.create_network.title\": \"Network\",\n  \"configuration.create_network.message\": \"uCoin is a P2P software and needs bidirectionnal access to the network. Please chose carefully the following parameters.\",\n  \"configuration.create_network.none\": \"None\",\n  \"configuration.create_network.ipv4.title\": \"IPv4\",\n  \"configuration.create_network.ipv6.title\": \"IPv6\",\n  \"configuration.create_network.ipv4.message\": \"For compatibilty reasons, you may prefer to use classic IPv4 interfaces. The configuration is more complicated.\",\n  \"configuration.create_network.local_ipv4\": \"Private (computer)\",\n  \"configuration.create_network.remote_ipv4\": \"Public (box/router)\",\n  \"configuration.create_network.local_ipv6\": \"IPv6\",\n  \"configuration.create_network.lport\": \"Local port\",\n  \"configuration.create_network.rport\": \"Remote port\",\n  \"configuration.create_network.port.title\": \"Ports\",\n  \"configuration.create_network.ipv6.message\": \"IPv6 gives your computer a unique, direct address to your node over the Internet. This is the <b>recommended way</b> to connect your node to the network.\",\n  \"configuration.create_network.port.message\": \"Wether you use IPv6 or IPv4, Duniter node will use this port number for connection to the network. If you use IPv6, local and remote port should equal each other.\",\n  \"configuration.create_network.dns.title\": \"Domain name\",\n  \"configuration.create_network.dns\": \"Domain name\",\n  \"configuration.create_network.dns.message\": \"IPv6 (AAAA) and IPv4 (A) DNS records will be used.\",\n  \"configuration.create_network.upnp\": \"Use UPnP\",\n  \"configuration.create_network.button.validate\": \"Continue\",\n  \"configuration.create_network.button.autoconf\": \"Automatic configuration\",\n  \"configuration.create_parameters.title\": \"Currency\",\n  \"configuration.create_parameters.message\": \"Initial parameters of the currency. It should be carefully chosen, as these parameters never change once the currency is started.\",\n  \"configuration.create_parameters.currency.title\": \"Money units\",\n  \"configuration.create_parameters.currency.message\": \"Give a name to your currency. The 3 following parameters configure the way new money units are created.\",\n  \"configuration.create_parameters.currency\": \"Currency name\",\n  \"configuration.create_parameters.c\": \"c\",\n  \"configuration.create_parameters.dt\": \"UD period\",\n  \"configuration.create_parameters.ud0\": \"UD(0)\",\n  \"configuration.create_parameters.button.validate\": \"Continue\",\n  \"configuration.create_parameters.wot.title\": \"Web of Trust\",\n  \"configuration.create_parameters.wot.message\": \"The following parameters deal with identities and their links gathered in the Web of Trust concept.\",\n  \"configuration.create_parameters.sigStock\": \"Max cert stock\",\n  \"configuration.create_parameters.sigPeriod\": \"Delay between 2 certs\",\n  \"configuration.create_parameters.sigValidity\": \"Cert expiry delay\",\n  \"configuration.create_parameters.msValidity\": \"Membership expiry delay\",\n  \"configuration.create_parameters.sigQty\": \"Min required certs\",\n  \"configuration.create_parameters.sigWindow\": \"Cert time window\",\n  \"configuration.create_parameters.stepMax\": \"Max distance\",\n  \"configuration.create_parameters.xpercent\": \"Percent of distance\",\n  \"configuration.create_parameters.blockchain.title\": \"Blockchain\",\n  \"configuration.create_parameters.blockchain.message\": \"The technical support of money and identities is the blockchain. It also has some parameters driving its behavior.\",\n  \"configuration.create_parameters.medianTimeBlocks\": \"Blocks count\",\n  \"configuration.create_parameters.avgGenTime\": \"Block gen. duration\",\n  \"configuration.create_parameters.dtDiffEval\": \"Blocks count for diff.\",\n  \"configuration.create_parameters.blocksRot\": \"Personal diff. blocks\",\n  \"configuration.create_parameters.percentRot\": \"Personal diff. rotation\",\n  \"configuration.create_root.title\": \"Root block creation\",\n  \"configuration.create_root.message\": \"This is the final step to create the new currency! The root block or <i>genesis</i> will include the first members and define the currency parameters. Once generated and submitted, the blockchain will be started.\",\n  \"configuration.create_root.button.start\": \"Start HTTP\",\n  \"configuration.create_root.button.stop\": \"Stop HTTP\",\n  \"configuration.create_root.button.generate\": \"Give a try\",\n  \"configuration.create_root.need_a_try\": \"You need to generate a first block with the « Give a try » button. Start HTTP server to do so.\",\n  \"configuration.create_root.button.accept_and_send\": \"Accept this block and start currency\",\n  \"configuration.create_root.button.cancel\": \"Cancel creation and go to home screen\",\n  \"configuration.create_root.host_listening\": \"Host listening at:\",\n  \"configuration.create_uid.pubkey_preview\": \"Public key preview\",\n  \"home.current.number\": \"Current block #\",\n  \"home.current.membersCount\": \"Members count\",\n  \"home.current.medianTime\": \"Median time\",\n  \"home.current.powMin\": \"Common difficulty level\",\n  \"home.current.mmass\": \"Monetary mass\",\n  \"home.pulling.network\": \"Network\",\n  \"home.pulling.peer\": \"Peer\",\n  \"home.pulling.state.unkown\": \"Next sync in few minutes\",\n  \"home.pulling.state.synced\": \"Synced\",\n  \"home.pulling.state.syncing\": \"Syncing...\",\n  \"home.pow.unit\": \"blocks made by this key\",\n  \"home.pow.is_mirror\": \"This node is a mirror\",\n  \"home.pow.is_waiting\": \"Waiting for better proof conditions\",\n  \"home.tabs.overview\": \"Overview\",\n  \"home.tabs.overview.should_reconfigure\": \"Your configuration has changed and your node is no more reachable from the network. You should reconfigure it to have a functional node. If this message appears again, you should manually configure the network settings. Often, selecting only IPv6 interface (disabling IPv4) solves the problem.\",\n  \"home.tabs.network\": \"Peers\",\n  \"home.tabs.network.button.update\": \"Check peers again\",\n  \"home.tabs.logs\": \"Logs\",\n  \"home.tabs.logs.follow.logs\": \"Follow logs\",\n  \"home.tabs.logs.pause.logs\": \"Pause logs\",\n  \"home.tabs.logs.level.error\": \"Error\",\n  \"home.tabs.logs.level.warn\": \"Warning\",\n  \"home.tabs.logs.level.info\": \"Info\",\n  \"home.tabs.logs.level.debug\": \"Debug\",\n  \"home.tabs.logs.level.trace\": \"Trace\",\n  \"sync.title\": \"Synchronize\",\n  \"sync.message\": \"Your node will be synchronized with an existing currency: just enter technical details about a node to sync with it.\",\n  \"sync.host\": \"Host\",\n  \"sync.port\": \"Port\",\n  \"sync.check\": \"Check node\",\n  \"sync.start\": \"Synchronize with this node\",\n  \"sync.failed\": \"Synchronization failed.\",\n  \"sync.mode.simplified\": \"Simplified mode\",\n  \"sync.mode.manual\": \"Manual mode\",\n  \"sync.simplified.choose\": \"Node to connect to\",\n  \"sync.simplified.default_option\": \"Please select a node to continue\",\n  \"sync.simplified.currency\": \"Currency\",\n  \"sync.simplified.main_mirror\": \"(main mirror)\",\n  \"sync.simplified.official_mirror\": \"(other official mirror)\",\n  \"sync.ready.node.part1\": \"This node is available!\",\n  \"sync.ready.node.part2\": \"Click on the green button to proceed.\",\n  \"sync.started.node\": \"Synchronization started on node:\",\n  \"sync.error.unreachable.try.another.node\": \"This node is not available. Please select another one.\",\n  \"home.menu.server.stop\": \"Stop server\",\n  \"home.menu.server.start\": \"Start server\",\n  \"home.menu.server.restart\": \"Restart server\",\n  \"home.state\": \"Server:\",\n  \"home.state.started\": \"STARTED\",\n  \"home.state.stopped\": \"STOPPED\",\n  \"settings.tabs.logs\": \"Logs\",\n  \"settings.tabs.data\": \"Data\",\n  \"settings.tabs.backup\": \"Backup\",\n  \"settings.tabs.identity\": \"Crypto\",\n  \"settings.tabs.network\": \"Network\",\n  \"settings.tabs.currency\": \"Currency\",\n  \"settings.tabs.cpu\": \"CPU\",\n  \"settings.data.reset.title\": \"Reset this node\",\n  \"settings.data.reset.message\": \"If you desire to reset this node's data and sync it again with the network, please select a node to sync against and validate.\",\n  \"settings.data.reset.warning\": \"This process <strong>will not</strong> reset the node identity and network settings, which will be reused.\",\n  \"settings.data.reset.peer.none_option\": \"Select a node\",\n  \"settings.data.reset.peer.label\": \"Synchronization peer\",\n  \"settings.data.reset.button\": \"Full reset of the node\",\n  \"settings.data.reset_sync.button\": \"Reset data and start sync\",\n  \"settings.logs.title\": \"Logs\",\n  \"settings.logs.consult.message\": \"Your node continually generates information messages in a log file. This information may help you understand what your node <i>is doing</i> or what it <i>has done</i> few times ago.\",\n  \"settings.logs.consult.button\": \"View real-time logs\",\n  \"settings.logs.share.message\": \"You may want to <b>share your logs</b> with other people, sometimes to get help or to add informations in a bug tracker. Clicking on below button will extract the last 2000 lines of your logs and push it on the web, returning you a link to be shared with whoever you want.\",\n  \"settings.logs.share.button\": \"Create a web link to your logs\",\n  \"settings.logs.share.generating\": \"Generating your link...\",\n  \"settings.logs.share.error\": \"An error occurred during the generation of your link:\",\n  \"settings.data.backup.title\": \"Backup\",\n  \"settings.data.backup.message\": \"You can create backups of your node's data and restore them using the buttons below.\",\n  \"settings.data.backup.warning\": \"<b>Export</b> will only backup your node's data, which <i>excludes your secret key and configuration details</i>.<br><b>Import</b> will reset your node's data by applying the backup. Your secret keys and configuration remains untouched.\",\n  \"settings.data.backup.button.export\": \"Create a data backup\",\n  \"settings.data.backup.button.import\": \"Import a data backup\",\n  \"settings.data.backup.importing\": \"Importing data...\",\n  \"settings.data.backup.imported\": \"Import successfull!\",\n  \"settings.network.button.validate\": \"Save and apply network settings\",\n  \"settings.network.saved\": \"Configuration saved and applied successfully\",\n  \"settings.key.title\": \"Public key of this node:\",\n  \"settings.key.button.validate\": \"Save and use this key\",\n  \"settings.key.button.change\": \"Change keyring\",\n  \"settings.key.pubkey.description\": \"This public key is the public part of your keyring, which is composed of a public key and a private key. This public key is shared with all the peers of the network and users of the currency, while your private key is secretely kept and used by this node to process operations on the network.\",\n  \"settings.data.modal_title\": \"Confirm full reset\",\n  \"settings.data.modal_message\": \"This action will completely reset the data of your node and redirect you to initial configuration screen. Do you confirm?\",\n  \"settings.data.modal_disagree\": \"No, cancel this\",\n  \"settings.data.modal_agree\": \"Yes, process the reset\",\n  \"settings.data.reset.experimental\": \"This functionality is still considered experimental. If you encounters strange behaviors, please stop the software and reset manually your node by removing all the files BUT conf.json under ~/.config/ucoin/ucoin_default, and restart the software.\",\n  \"settings.cpu.title\": \"CPU settings\",\n  \"settings.cpu.message\": \"You can adjust the CPU power dedicated to proof-of-work computation. The higher the value, the faster is your node, the higher the chances you have to compute a block early.\",\n  \"settings.cpu.warning\": \"<b>Up to 8 cores</b> of your machine are dedicated to proof-of-work computation currently. Also, setting CPU to 100% does not mean Duniter will use 100% of each core, but will use as much as possible each of them, as a core is also shared with other programs.\",\n  \"settings.cpu.range\": \"% of CPU power core dedicated to proof-of-work :\",\n  \"settings.cpu.power\": \"Core power:\",\n  \"settings.cpu.saved\": \"CPU settings saved.\",\n  \"graphs.tabs.blockchain\": \"Blockchain\",\n  \"graphs.tabs.currency\": \"Currency\",\n  \"graphs.blockchain.range\": \"Graphs for the last X blocks: (please choose X value)\",\n  \"graphs.blockchain.with.time\": \"Time variations graph\",\n  \"graphs.blockchain.with.speed\": \"Writing speed graph\",\n  \"graphs.blockchain.with.difficulty\": \"Difficulty graph\",\n  \"help.about_duniter\": \"About Duniter\",\n  \"help.about_duniter.title\": \"About\",\n  \"help.about_duniter.subtitle\": \"Duniter Desktop\",\n  \"help.about_duniter.version\": \"Version: \",\n  \"help.about_duniter.forum\": \"Forum\",\n  \"help.about_duniter.chat\": \"Chat\",\n  \"help.new_version_available\": \"New version available\"\n}\n;","var co = require('co');\nvar _ = require('underscore');\n\nmodule.exports = (app) => {\n\n  app.config(['$stateProvider', '$urlRouterProvider', ($stateProvider, $urlRouterProvider) => {\n\n    // States\n    $stateProvider.\n    state('index', {\n      url: '/',\n      template: require('views/index'),\n      resolve: {\n        ws: (Webmin) => Webmin.ws(),\n        summary: (Webmin) => Webmin.summary()\n      },\n      controller: 'IndexController'\n    }).\n\n    state('about', {\n      url: '/about',\n      template: require('views/about'),\n      resolve: {\n        summary: (Webmin) => Webmin.summary(),\n        version: (summary) => summary && 'v' + summary.version || 'unknown version'\n      },\n      controller: 'AboutController'\n    }).\n\n    state('configure', {\n      abstract: true,\n      url: '/configure',\n      template: require('views/init/layout'),\n      controller: ($scope) => {\n        $scope.conf = {\n          currency: 'super_currency',\n          c: 0.007376575,\n          dt: 30.4375 * 24 * 3600,\n          ud0: 100,\n          stepMax: 3,\n          sigDelay: 3600 * 24 * 365 * 5,\n          sigPeriod: 0, // Instant\n          sigStock: 40,\n          sigWindow: 3600 * 24 * 14, // 2 weeks\n          sigValidity: 3600 * 24 * 365,\n          msValidity: 3600 * 24 * 365,\n          sigQty: 0,\n          xpercent: 0.9,\n          percentRot: 0.66,\n          blocksRot: 20,\n          avgGenTime: 16 * 60,\n          dtDiffEval: 10,\n          medianTimeBlocks: 20\n        };\n      }\n    }).\n\n    state('configure.choose', {\n      url: '/choose',\n      template: require('views/init/choose'),\n      controller: ($scope, Importer) => {\n        Importer($scope);\n      }\n    }).\n\n    state('configure.create', {\n      url: '/create',\n      template: '<div class=\"ui-scrollable\" ui-view=\"\"></div>'\n    }).\n\n    state('configure.create.uid', {\n      url: '/create/uid',\n      template: require('views/init/create/create_uid'),\n      controller: 'IdentityController'\n    }).\n\n    state('configure.create.network', {\n      url: '/create/network',\n      template: require('views/init/create/create_network'),\n      resolve: {\n        netinterfaces: (Webmin) => resolveNetworkAutoConf(Webmin),\n        firstConf: () => true\n      },\n      controller: 'NetworkController'\n    }).\n\n    state('configure.create.parameters', {\n      url: '/create/parameters',\n      template: require('views/init/create/create_parameters'),\n      controller: 'ParametersController'\n    }).\n\n    state('configure.create.root', {\n      url: '/create/root',\n      template: require('views/init/create/create_root'),\n      controller: 'RootBlockController'\n    }).\n\n    state('sync', {\n      url: '/sync?host=&port=&sync=&to=',\n      template: require('views/init/sync/sync'),\n      controller: 'SyncController'\n    }).\n\n    state('main', {\n      abstract: true,\n      url: '/main',\n      template: require('views/main/main'),\n      resolve: {\n        ws: (Webmin) => Webmin.ws(),\n        summary: (Webmin) => Webmin.summary()\n      },\n      controller: 'MainController'\n    }).\n\n    state('main.home', {\n      abstract: true,\n      url: '/home',\n      template: require('views/main/home/home'),\n      controller: 'HomeController'\n    }).\n\n    state('main.home.overview', {\n      url: '/overview',\n      template: require('views/main/home/tabs/overview'),\n      resolve: {\n        summary: (Webmin) => Webmin.summary()\n      },\n      controller: 'OverviewController'\n    }).\n\n    state('main.home.network', {\n      url: '/network',\n      template: require('views/main/home/tabs/network'),\n      resolve: {\n        peers: (Webmin) => co(function *() {\n          return Webmin.network.peers();\n        })\n      },\n      controller: 'HomeNetworkController'\n    }).\n\n    state('main.settings', {\n      abstract: true,\n      url: '/settings',\n      template: require('views/main/settings/settings'),\n      resolve: {\n        summary: (Webmin) => Webmin.summary()\n      },\n      controller: 'SettingsController'\n    }).\n\n    state('main.settings.data', {\n      url: '/data',\n      template: require('views/main/settings/tabs/data'),\n      resolve: {\n        peers: (Webmin) => co(function *() {\n          try {\n            let self = yield Webmin.network.selfPeer();\n            let res = yield Webmin.network.peers();\n            return _.filter(res.peers, (p) => p.pubkey != self.pubkey && p.status == 'UP');\n          } catch (e) {\n            console.error(e);\n            return [];\n          }\n        })\n      },\n      controller: 'DataController'\n    }).\n\n    state('main.settings.logs', {\n      url: '/logs',\n      template: require('views/main/settings/tabs/logs'),\n      controller: 'LogsSettingsController'\n    }).\n\n    state('main.settings.backup', {\n      url: '/backup',\n      template: require('views/main/settings/tabs/backup'),\n      controller: 'BackupController'\n    }).\n\n    state('main.settings.cpu', {\n      url: '/cpu',\n      template: require('views/main/settings/tabs/cpu'),\n      resolve: {\n        summary: (Webmin) => Webmin.summary()\n      },\n      controller: 'CPUController'\n    }).\n\n    state('main.settings.crypto', {\n      url: '/crypto',\n      template: require('views/main/settings/tabs/crypto'),\n      controller: 'KeyController'\n    }).\n\n    state('main.settings.network', {\n      url: '/network',\n      resolve: {\n        netinterfaces: (Webmin) => resolveNetworkAutoConf(Webmin),\n        firstConf: () => false\n      },\n      template: require('views/main/settings/tabs/network'),\n      controller: 'NetworkController'\n    }).\n\n    state('main.settings.currency', {\n      url: '/currency',\n      resolve: {\n        conf: (summary) => co(function *() {\n          return summary.parameters;\n        })\n      },\n      template: require('views/main/settings/tabs/currency'),\n      controller: 'CurrencyController'\n    }).\n\n    state('main.graphs', {\n      abstract: true,\n      url: '/graphs',\n      template: require('views/main/graphs/graphs'),\n      controller: 'GraphsController'\n    }).\n\n    state('main.graphs.blockchain', {\n      url: '/blockchain',\n      template: require('views/main/graphs/blockchain'),\n      controller: 'GraphsBlockchainController'\n    }).\n\n    //state('graphs.crypto', {\n    //  url: '/crypto',\n    //  template: require('views/graphs/crypto'),\n    //  controller: 'KeyController'\n    //}).\n    //\n    //state('graphs.network', {\n    //  url: '/network',\n    //  resolve: {\n    //    netinterfaces: (Webmin) => resolveNetworkAutoConf(Webmin),\n    //    firstConf: () => false\n    //  },\n    //  template: require('views/graphs/network'),\n    //  controller: 'NetworkController'\n    //}).\n    //\n    //state('graphs.currency', {\n    //  url: '/currency',\n    //  resolve: {\n    //    conf: (bmapi) => co(function *() {\n    //      return bmapi.currency.parameters();\n    //    })\n    //  },\n    //  template: require('views/graphs/currency'),\n    //  controller: 'CurrencyController'\n    //}).\n\n    state('logs', {\n      url: '/logs',\n      template: require('views/logs'),\n      resolve: {\n        ws: (Webmin) => Webmin.ws()\n      },\n      controller: 'LogsController'\n    }).\n\n    state('error', {\n      url: '/error\\?err',\n      template: require('views/error'),\n      controller: ($scope, $stateParams) =>\n        $scope.errorMsg = $stateParams.err || 'err.unknown'\n    });\n\n    // Default route\n    $urlRouterProvider.otherwise('/');\n  }]);\n\n  app.run(($rootScope, $state) => {\n    $rootScope.$on('$stateChangeError', (event, toState, toParams, fromState, fromParams, error) => {\n      console.error(error);\n      $state.go('error', { err: error.message });\n    });\n  });\n\n  function resolveNetworkAutoConf(Webmin) {\n    return co(function *() {\n      let netinterfaces = yield Webmin.network.interfaces();\n      return netinterfaces || { local: {}, remote: {} };\n    });\n  }\n};\n","module.exports = (app) => {\n\n  app.config(['$translateProvider', ($translateProvider) => {\n\n    $translateProvider.translations('en', require('./i18n/en'));\n\n    // Default language\n    $translateProvider.preferredLanguage('en');\n\n    // Other parameters\n    $translateProvider.useSanitizeValueStrategy('');\n  }]);\n};\n","\"use strict\";\n\nmodule.exports = function Peer(json) {\n\n  var that = this;\n\n  var BMA_REGEXP = /^BASIC_MERKLED_API( ([a-z_][a-z0-9-_.]*))?( ([0-9.]+))?( ([0-9a-f:]+))?( ([0-9]+))$/;\n\n  Object.keys(json).forEach(function(key) {\n    that[key] = json[key];\n  });\n\n  that.endpoints = that.endpoints || [];\n  that.statusTS = that.statusTS || 0;\n\n  that.keyID = function () {\n    return that.pubkey && that.pubkey.length > 10 ? that.pubkey.substring(0, 10) : \"Unknown\";\n  };\n\n  that.copyValues = function(to) {\n    var obj = that;\n    [\"version\", \"currency\", \"pub\", \"endpoints\", \"hash\", \"status\", \"statusTS\", \"block\", \"signature\"].forEach(function (key) {\n      to[key] = obj[key];\n    });\n  };\n\n  that.copyValuesFrom = function(from) {\n    var obj = that;\n    [\"version\", \"currency\", \"pub\", \"endpoints\", \"block\", \"signature\"].forEach(function (key) {\n      obj[key] = from[key];\n    });\n  };\n\n  that.json = function() {\n    var obj = that;\n    var json = {};\n    [\"version\", \"currency\", \"endpoints\", \"status\", \"block\", \"signature\"].forEach(function (key) {\n      json[key] = obj[key];\n    });\n    json.raw = that.getRaw();\n    json.pubkey = that.pubkey;\n    return json;\n  };\n\n  that.getBMA = function() {\n    var bma = null;\n    that.endpoints.forEach(function(ep){\n      var matches = !bma && ep.match(BMA_REGEXP);\n      if (matches) {\n        bma = {\n          \"dns\": matches[2] || '',\n          \"ipv4\": matches[4] || '',\n          \"ipv6\": matches[6] || '',\n          \"port\": matches[8] || 9101\n        };\n      }\n    });\n    return bma || {};\n  };\n\n  that.getDns = function() {\n    var bma = that.getBMA();\n    return bma.dns ? bma.dns : null;\n  };\n\n  that.getIPv4 = function() {\n    var bma = that.getBMA();\n    return bma.ipv4 ? bma.ipv4 : null;\n  };\n\n  that.getIPv6 = function() {\n    var bma = that.getBMA();\n    return bma.ipv6 ? bma.ipv6 : null;\n  };\n\n  that.getPort = function() {\n    var bma = that.getBMA();\n    return bma.port ? bma.port : null;\n  };\n\n  that.getHost = function() {\n    var bma = that.getBMA();\n    var host =\n      (that.hasValid4(bma) ? bma.ipv4 :\n        (bma.dns ? bma.dns :\n          (bma.ipv6 ? '[' + bma.ipv6 + ']' : '')));\n    return host;\n  };\n\n  that.getURL = function() {\n    var bma = that.getBMA();\n    var base = '';\n    if (bma.dns) {\n      base = bma.dns;\n    } else if (that.hasValid4(bma)) {\n      base = bma.ipv4;\n    } else if (bma.ipv6) {\n      base = '[' + bma.ipv6 + ']';\n    }\n    if(bma.port)\n      base += ':' + bma.port;\n    return base;\n  };\n\n  that.hasValid4 = function(bma) {\n    return bma.ipv4 && !bma.ipv4.match(/^127.0/) && !bma.ipv4.match(/^192.168/) ? true : false;\n  };\n\n  that.getNamedURL = function() {\n    var bma = that.getBMA();\n    var base =\n      (that.hasValid4(bma) ? bma.ipv4 :\n        (bma.dns ? bma.dns :\n          (bma.ipv6 ? '[' + bma.ipv6 + ']' : '')));\n    if(bma.port)\n      base += ':' + bma.port;\n    return base;\n  };\n\n  that.isReachable = function () {\n    return that.getURL() ? true : false;\n  };\n};\n","module.exports = function mobilecheck() {\n  var check = false;\n  (function(a){if(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0,4)))check = true})(navigator.userAgent||navigator.vendor||window.opera);\n  return check;\n};\n","module.exports = (app) => {\n\n  let Base58 = {};\n\n  Base58.alphabet = '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz';\n  Base58.alphabetMap = {};\n\n  for(let i = 0; i < Base58.alphabet.length; i++) {\n    Base58.alphabetMap[Base58.alphabet.charAt(i)] = i\n  }\n\n  Base58.encode = function(buffer) {\n    if (buffer.length === 0) return '';\n\n    let i, j, digits = [0];\n    for (i = 0; i < buffer.length; i++) {\n      for (j = 0; j < digits.length; j++) digits[j] <<= 8\n      digits[digits.length - 1] += buffer[i];\n\n      let carry = 0;\n      for (j = digits.length - 1; j >= 0; j--){\n        digits[j] += carry;\n        carry = (digits[j] / 58) | 0;\n        digits[j] %= 58\n      }\n\n      while (carry) {\n        digits.unshift(carry);\n        carry = (digits[0] / 58) | 0;\n        digits[0] %= 58\n      }\n    }\n\n    // deal with leading zeros\n    for (i = 0; i < buffer.length - 1 && buffer[i] == 0; i++) digits.unshift(0)\n\n    return digits.map(function(digit) { return Base58.alphabet[digit] }).join('')\n  };\n\n  Base58.decode = function(string) {\n    if (string.length === 0) return (new Uint8Array());\n\n    let input = string.split('').map(function(c){\n      return Base58.alphabetMap[c]\n    });\n\n    let i, j, bytes = [0];\n    for (i = 0; i < input.length; i++) {\n      for (j = 0; j < bytes.length; j++) bytes[j] *= 58\n      bytes[bytes.length - 1] += input[i];\n\n      let carry = 0;\n      for (j = bytes.length - 1; j >= 0; j--){\n        bytes[j] += carry;\n        carry = bytes[j] >> 8;\n        bytes[j] &= 0xff\n      }\n\n      while (carry) {\n        bytes.unshift(carry);\n        carry = bytes[0] >> 8;\n        bytes[0] &= 0xff\n      }\n    }\n\n    // deal with leading zeros\n    for (i = 0; i < input.length - 1 && input[i] == 0; i++) bytes.unshift(0)\n    return (new Uint8Array(bytes))\n  };\n\n  app.factory('Base58', function() {\n    return {\n      encode: Base58.encode,\n      decode: Base58.decode\n    };\n  });\n};\n","var _ = require('underscore');\nvar conf = require('../lib/conf/conf');\nlet moment = require('moment');\n\nmodule.exports = (app) => {\n\n    app.filter('mt_date', () => {\n      return (input) => {\n        if(input == null){ return \"\"; }\n        return moment(input * 1000).format('YYYY MM DD');\n      };\n    });\n\n    app.filter('mt_time', () => {\n      return (input) => {\n        if(input == null){ return \"\"; }\n        return moment(input * 1000).format('HH:mm:ss');\n      };\n    });\n};\n","module.exports = (app) => {\n\n  app.factory('Graph', function() {\n      return {\n\n        speedGraph: function speedGraphs (id, offset, speeds, minSpeeds, maxSpeeds, getSeries) {\n          var xValuex = [];\n          for (var i = 0, len = speeds.length; i < len; i++) {\n            xValuex.push(i + offset);\n          }\n          $(id).highcharts({\n            chart: {\n              type: \"area\",\n              zoomType: 'x',\n              events: {\n                load: function () {\n                  getSeries(this.series);\n                }\n              }\n            },\n            title: {\n              text: 'Blocks writing speed'\n            },\n            subtitle: {\n              text: document.ontouchstart === undefined ?\n                'Click and drag in the plot area to zoom in' :\n                'Pinch the chart to zoom in'\n            },\n            xAxis: {\n              //categories: xValuex,\n              minRange: 3, // 10 blocks,\n              labels: {\n                formatter: function() {\n                  return this.value + offset;\n                }\n              }\n            },\n            yAxis: {\n              //type: 'logarithmic',\n              minorTickInterval: 1,\n              title: {\n                text: 'Blocks per hour (logarithmic scale)'\n              },\n              floor: 0,\n              min: 0\n            },\n            colors: ['#ff0000', '#7cb5ec', '#000000'],\n            legend: {\n              enabled: true\n            },\n            tooltip: {\n              shared: true,\n              crosshairs: true,\n              formatter: blockFormatter(offset)\n            },\n            plotOptions: {\n              area: {\n                fillColor: {\n                  linearGradient: { x1: 0, y1: 0, x2: 0, y2: 1},\n                  stops: [\n                    [0, Highcharts.getOptions().colors[0]],\n                    [1, Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get('rgba')]\n                  ]\n                },\n                marker: {\n                  radius: 2\n                },\n                lineWidth: 1,\n                states: {\n                  hover: {\n                    lineWidth: 1\n                  }\n                },\n                threshold: null\n              }\n            },\n\n            series: [{\n              type: 'line',\n              name: \"Upper limit\",\n              data: maxSpeeds\n            },{\n              type: 'area',\n              name: \"Actual speed\",\n              data: speeds\n            },{\n              type: 'line',\n              name: \"Lower limit\",\n              data: minSpeeds\n            }\n            ]\n          });\n        },\n\n        difficultyGraph: function difficultyGraph (id, offset, difficulties) {\n          $(id).highcharts({\n            chart: {\n              type: \"area\",\n              zoomType: 'x'\n            },\n            title: {\n              text: 'Proof-of-Work difficulty by block'\n            },\n            subtitle: {\n              text: document.ontouchstart === undefined ?\n                'Click and drag in the plot area to zoom in' :\n                'Pinch the chart to zoom in'\n            },\n            xAxis: {\n              minRange: 10, // 10 blocks,\n              labels: {\n                formatter: function() {\n                  return this.value + offset;\n                }\n              }\n            },\n            yAxis: {\n              title: {\n                text: 'Number of zeros'\n              },\n              floor: 0,\n              min: 0\n            },\n            legend: {\n              enabled: true\n            },\n            tooltip: {\n              shared: true,\n              crosshairs: true,\n              formatter: blockFormatter(offset)\n            },\n            plotOptions: {\n              area: {\n                fillColor: {\n                  linearGradient: { x1: 0, y1: 0, x2: 0, y2: 1},\n                  stops: [\n                    [0, Highcharts.getOptions().colors[0]],\n                    [1, Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get('rgba')]\n                  ]\n                },\n                marker: {\n                  radius: 2\n                },\n                lineWidth: 1,\n                states: {\n                  hover: {\n                    lineWidth: 1\n                  }\n                },\n                threshold: null\n              }\n            },\n\n            series: [\n              {\n                name: 'PoW difficulty',\n                data: difficulties\n              }\n            ]\n          });\n        },\n\n        timeGraphs: function timeGraphs (id, offset, timeAccelerations, medianTimeIncrements, speeds, minSpeeds, maxSpeeds) {\n          var timesInc = [];\n          medianTimeIncrements.forEach(function (inc) {\n            timesInc.push(inc == 0 ? 1 : inc);\n          });\n          $(id).highcharts({\n            chart: {\n              // type: \"area\",\n              zoomType: 'x'\n            },\n            title: {\n              text: 'Blockchain time variations'\n            },\n            subtitle: {\n              text: document.ontouchstart === undefined ?\n                'Click and drag in the plot area to zoom in' :\n                'Pinch the chart to zoom in'\n            },\n            xAxis: {\n              minRange: 10, // 10 blocks,\n              labels: {\n                formatter: function() {\n                  return this.value + offset;\n                }\n              }\n            },\n            yAxis: {\n              //type: 'logarithmic',\n              minorTickInterval: 1,\n              title: {\n                text: 'Number of seconds (logarithmic scale)'\n              }\n            },\n            legend: {\n              enabled: true\n            },\n            tooltip: {\n              shared: true,\n              crosshairs: true,\n              formatter: blockFormatter(offset)\n            },\n            plotOptions: {\n              area: {\n                fillColor: {\n                  linearGradient: { x1: 0, y1: 0, x2: 0, y2: 1},\n                  stops: [\n                    [0, Highcharts.getOptions().colors[0]],\n                    [1, Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get('rgba')]\n                  ]\n                },\n                marker: {\n                  radius: 2\n                },\n                lineWidth: 1,\n                states: {\n                  hover: {\n                    lineWidth: 1\n                  }\n                },\n                threshold: null\n              }\n            },\n\n            series: [\n              {\n                name: 'Time acceleration',\n                data: timeAccelerations\n              },{\n                name: \"Median Time variation\",\n                data: timesInc\n              }\n              ,{\n                name: \"Too high duration\",\n                data: maxSpeeds\n              }\n              ,{\n                name: \"Actual duration\",\n                data: speeds\n              }\n              ,{\n                name: \"Too low duration\",\n                data: minSpeeds\n              }\n            ]\n          });\n        }\n      }\n    });\n};\n\nfunction blockFormatter(offset) {\n  return function() {\n    var html = '<span style=\"font-size: 10px\">' + (this.x + offset) + '</span><br/>';\n    for (var i = 0, len = this.points.length; i < len; i++) {\n      var point = this.points[i];\n      var series = point.series;\n      html += '<span style=\"color:' + series.color + '\">\\u25CF</span>' + series.name + ': <b>' + point.y + '</b><br/>';\n    }\n    return html;\n  }\n}\n","module.exports = (app) => {\n\n  app.factory('Importer', function($http, $state, $timeout, UIUtils, Upload, Webmin) {\n\n    return ($scope) => {\n\n      $scope.uploadFiles = function(file, errFiles) {\n        $scope.f = file;\n        $scope.errFile = errFiles && errFiles[0];\n        if (file) {\n          UIUtils.toast('settings.data.backup.importing');\n          file.upload = Upload.upload({\n            url: Webmin.getImportURL(),\n            data: { importData: file }\n          });\n\n          file.upload.then(function (response) {\n            $timeout(function () {\n              UIUtils.toast('settings.data.backup.imported');\n              $state.go('main.home.overview');\n              file.result = response.data;\n            });\n          }, function (response) {\n            if (response.status > 0)\n              $scope.errorMsg = response.status + ': ' + response.data;\n          }, function (evt) {\n            file.progress = Math.min(100, parseInt(100.0 *\n              evt.loaded / evt.total));\n          });\n        }\n      }\n    };\n  });\n};\n","module.exports = (app) => {\n\n  app.factory('PubkeyGenerator', function($timeout, Webmin) {\n\n    var co = require('co');\n\n    return ($scope) => {\n\n      let concat = \"\";\n      $scope.pubkey_preview = \"\";\n      let timeout = preview();\n\n      function preview() {\n        return $timeout(() => {\n          if ($scope.$parent) {\n            let salt = $scope.$parent.conf.idty_entropy;\n            let pass = $scope.$parent.conf.idty_password;\n            let newConcat = [salt, pass].join('');\n            if (salt && pass && newConcat != concat) {\n              concat = newConcat;\n              $scope.previewPubkey(concat);\n              timeout = preview();\n            } else {\n              timeout = preview();\n            }\n          }\n        }, 100);\n      }\n\n      $scope.previewPubkey = () => co(function *() {\n        let data = yield Webmin.key.preview({\n          conf: $scope.$parent.conf\n        });\n        $scope.pubkey_preview = data.pubkey;\n      }).catch(() => null);\n    };\n  });\n};\n","module.exports = (app) => {\n\n  app.factory('UIUtils', function($q, $translate, $state, $location) {\n      return {\n\n        translate: (msg) => $q.when($translate(msg)),\n\n        toastRaw: (msg) => {\n          return Materialize.toast(msg, 4000);\n        },\n\n        toast: (msg) => {\n          return $q.when($translate(msg)).then((translated) => Materialize.toast(translated, 4000))\n        },\n\n        enableInputs: () => $('i.prefix, label[value!=\"\"]').addClass('active'),\n\n        enableTabs: () => {\n          let jTabs = $('ul.tabs');\n          jTabs.tabs();\n          $('ul.tabs a').click((e) => {\n            let href = $(e.currentTarget).attr('href');\n            let state = href.slice(1);\n            $state.go(state);\n          });\n\n          let currentID = $location.path()\n            .replace(/\\//g, '.')\n            .replace(/\\./, '');\n\n          jTabs.tabs('select_tab', currentID);\n        },\n\n        changeTitle: (version) => document.title = 'Duniter ' + version\n      }\n    });\n};\n","const co = require('co');\nconst _ = require('underscore');\nconst conf = require('../lib/conf/conf');\n\nmodule.exports = (angular) => {\n\n  angular.module('duniter.services.webmin', ['ngResource'])\n\n    .factory('Webmin', function($http, $q) {\n\n      function httpProtocol() {\n        return window.location.protocol + '//';\n      }\n\n      function wsProtocol() {\n        return window.location.protocol === 'https:' ? 'wss://' : 'ws://';\n      }\n\n      function Webmin(server) {\n\n        function getResource(uri, protocol) {\n          return function(params) {\n            return $q.when(httpGet(uri, params, protocol));\n          }\n        }\n\n        function httpGet(uri, params, protocol) {\n          return Q.Promise((resolve, reject) => {\n            var config = {\n              timeout: conf.api_timeout\n            }, suffix = '', pkeys = [], queryParams = null;\n            if (typeof params == 'object') {\n              pkeys = _.keys(params);\n              queryParams = {};\n            }\n            pkeys.forEach(function(pkey){\n              var prevURI = uri;\n              uri = uri.replace(new RegExp(':' + pkey), params[pkey]);\n              if (prevURI == uri) {\n                queryParams[pkey] = params[pkey];\n              }\n            });\n            config.params = queryParams;\n            $http.get((protocol || httpProtocol()) + server + uri + suffix, config)\n              .success(function(data, status, headers, config) {\n                resolve(data);\n              })\n              .error(function(data, status, headers, config) {\n                console.log(data);\n                reject(data);\n              });\n          });\n        }\n\n        function postResource(uri) {\n          return function(data, params) {\n            return $q.when(Q.Promise((resolve, reject) => {\n              var config = {\n                timeout: 4000\n              }, suffix = '', pkeys = [], queryParams = null;\n              if (typeof params == 'object') {\n                pkeys = _.keys(params);\n                queryParams = {};\n              }\n              pkeys.forEach(function(pkey){\n                var prevURI = uri;\n                uri = uri.replace(new RegExp(':' + pkey), params[pkey]);\n                if (prevURI == uri) {\n                  queryParams[pkey] = params[pkey];\n                }\n              });\n              config.params = queryParams;\n              $http.post(httpProtocol() + server + uri + suffix, data, config)\n                .success(function(data, status, headers, config) {\n                  resolve(data);\n                })\n                .error(function(data, status, headers, config) {\n                  reject(data);\n                });\n            }));\n          }\n        }\n\n        let wsMap = {};\n\n        function ws(uri) {\n          var sock = wsMap[uri] || new WebSocket(uri);\n          wsMap[uri] = sock;\n          sock.onclose = function(e) {\n            console.log('close');\n            console.log(e);\n          };\n          sock.onerror = function(e) {\n            console.log('onerror');\n            console.log(e);\n          };\n          let opened = false, openedCallback;\n          sock.onopen = function() {\n            opened = true;\n            openedCallback && openedCallback();\n          };\n          let listener, messageType;\n          sock.onmessage = function(e) {\n            let res = JSON.parse(e.data);\n            if (res.type == 'log') {\n              for (let i = 0, len = res.value.length; i < len; i++) {\n                let log = res.value[i];\n                // console[log.level](log.msg);\n              }\n            }\n            if (listener && (messageType === undefined || (res.type === messageType))) {\n              listener(res);\n            }\n          };\n          return {\n            on: function(type, callback) {\n              messageType = type;\n              listener = callback;\n            },\n            whenOpened: () => co(function *() {\n              if (opened) return true;\n              else {\n                yield Q.Promise((resolve) => {\n                  openedCallback = resolve;\n                });\n              }\n            }),\n            send: (msg) => sock.send(msg)\n          };\n        }\n\n        return {\n          getExportURL: () => httpProtocol() + server + '/webmin/data/duniter_export',\n          getImportURL: () => httpProtocol() + server + '/webmin/data/duniter_import',\n          isNodePubliclyReachable: getResource('/webmin/server/reachable'),\n          ws: () => ws(wsProtocol() + server + '/webmin/ws'),\n          wsBlock: () => ws(wsProtocol() + server + '/webmin/ws_block'),\n          wsPeer: () => ws(wsProtocol() + server + '/webmin/ws_peer'),\n          summary: getResource('/webmin/summary'),\n          powSummary: getResource('/webmin/summary/pow'),\n          logsExport: (nbLines) => getResource('/webmin/logs/export/' + nbLines)(),\n          blockchain: {\n            blocks: (opts) => getResource('/webmin/blockchain/blocks/' + opts.count + '/' + opts.from)(),\n            block_add: postResource('/webmin/blockchain/add')\n          },\n          server: {\n            http: {\n              start: getResource('/webmin/server/http/start'),\n              stop: getResource('/webmin/server/http/stop'),\n              openUPnP: getResource('/webmin/server/http/upnp/open'),\n              regularUPnP: getResource('/webmin/server/http/upnp/regular')\n            },\n            services: {\n              startAll: getResource('/webmin/server/services/start_all'),\n              stopAll: getResource('/webmin/server/services/stop_all')\n            },\n            sendConf: postResource('/webmin/server/send_conf'),\n            netConf: postResource('/webmin/server/net_conf'),\n            keyConf: postResource('/webmin/server/key_conf'),\n            cpuConf: postResource('/webmin/server/cpu_conf'),\n            testSync: postResource('/webmin/server/test_sync'),\n            startSync: postResource('/webmin/server/start_sync'),\n            previewNext: getResource('/webmin/server/preview_next'),\n            autoConfNetwork: getResource('/webmin/server/auto_conf_network'),\n            resetData: getResource('/webmin/server/reset/data'),\n            republishNewSelfPeer: getResource('/webmin/server/republish_selfpeer')\n          },\n          key: {\n            preview: postResource('/webmin/key/preview')\n          },\n          network: {\n            interfaces: getResource('/webmin/network/interfaces'),\n            selfPeer: getResource('/webmin/network/self'),\n            peers: getResource('/webmin/network/peers')\n          },\n          currency: {\n            parameters: getResource('/webmin/currency/parameters')\n          }\n        }\n      }\n      let server = window.location.hostname;\n      let port = window.location.port;\n      let service = Webmin([server, port].join(':'));\n      service.instance = Webmin;\n      return service;\n    });\n};\n"]}